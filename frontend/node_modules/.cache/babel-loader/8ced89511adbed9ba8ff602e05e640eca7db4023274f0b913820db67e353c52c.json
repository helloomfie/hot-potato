{"ast":null,"code":"class HotPotatoGame {\n  constructor(canvasId, gameState, updateScore, hotPotatoes, teamStats, currentUser, onTaskClick, onTaskComplete) {\n    this.canvas = document.getElementById(canvasId);\n    if (!this.canvas) {\n      console.error('Canvas element not found');\n      return;\n    }\n    this.ctx = this.canvas.getContext('2d');\n    this.gameState = gameState;\n    this.updateScore = updateScore;\n    this.hotPotatoes = hotPotatoes;\n    this.teamStats = teamStats;\n    this.currentUser = currentUser;\n    this.onTaskClick = onTaskClick;\n    this.onTaskComplete = onTaskComplete;\n    this.isRunning = false;\n    this.animationId = null;\n    this.spirits = [];\n    this.particles = [];\n    this.locations = [];\n    this.selectedTask = null;\n    this.showTaskModal = false;\n\n    // Image assets\n    this.images = {};\n    this.imagesLoaded = false;\n    this.loadImages();\n    this.initializeLocations();\n    this.handleClick = this.handleClick.bind(this);\n    this.handleKeyPress = this.handleKeyPress.bind(this);\n    this.gameLoop = this.gameLoop.bind(this);\n    this.resizeCanvas();\n  }\n  async loadImages() {\n    const imageUrls = {\n      background: 'myimages/background.png',\n      spirit1: 'myimages/spirit1.png',\n      // common\n      spirit2: 'myimages/spirit2.png',\n      // rare\n      spirit3: 'myimages/spirit3.png' // epic\n    };\n    const loadPromises = Object.entries(imageUrls).map(([key, url]) => {\n      return new Promise((resolve, reject) => {\n        const img = new Image();\n        img.onload = () => {\n          this.images[key] = img;\n          resolve();\n        };\n        img.onerror = () => {\n          console.warn(`Failed to load image: ${url}`);\n          // Create fallback for missing images\n          this.images[key] = null;\n          resolve();\n        };\n        img.src = url;\n      });\n    });\n    try {\n      await Promise.all(loadPromises);\n      this.imagesLoaded = true;\n      console.log('Images loaded successfully');\n    } catch (error) {\n      console.error('Error loading images:', error);\n      this.imagesLoaded = true; // Continue without images\n    }\n  }\n  initializeLocations() {\n    // Positioning based on the background image layout\n    this.locations = [{\n      name: \"Sales Office\",\n      x: 150,\n      y: 320,\n      radius: 40,\n      color: \"#FFCC00\",\n      tasks: [],\n      number: 1\n    },\n    // Bottom left house\n    {\n      name: \"New Lead\",\n      x: 250,\n      y: 250,\n      radius: 40,\n      color: \"#66B2FF\",\n      tasks: [],\n      number: 2\n    },\n    // Empty lot\n    {\n      name: \"New Customer\",\n      x: 350,\n      y: 200,\n      radius: 40,\n      color: \"#9B59B6\",\n      tasks: [],\n      number: 3\n    },\n    // Small house\n    {\n      name: \"Pre-Construction\",\n      x: 550,\n      y: 120,\n      radius: 40,\n      color: \"#2ECC71\",\n      tasks: [],\n      number: 4\n    },\n    // Big building with truck\n    {\n      name: \"Construction\",\n      x: 600,\n      y: 280,\n      radius: 40,\n      color: \"#FF6B6B\",\n      tasks: [],\n      number: 5\n    },\n    // Construction site with ladder\n    {\n      name: \"Post Construction\",\n      x: 700,\n      y: 320,\n      radius: 40,\n      color: \"#4A90E2\",\n      tasks: [],\n      number: 6\n    } // Happy family house\n    ];\n  }\n  resizeCanvas() {\n    const container = this.canvas.parentElement;\n    const rect = container.getBoundingClientRect();\n    this.canvas.width = Math.min(800, rect.width - 20);\n    this.canvas.height = 400;\n  }\n  start() {\n    if (this.isRunning) return;\n    this.isRunning = true;\n    this.canvas.addEventListener('click', this.handleClick);\n    document.addEventListener('keydown', this.handleKeyPress);\n    this.generateSpirits();\n    this.updateTaskLocations();\n    this.gameLoop();\n  }\n  stop() {\n    this.isRunning = false;\n    if (this.animationId) {\n      cancelAnimationFrame(this.animationId);\n      this.animationId = null;\n    }\n    this.canvas.removeEventListener('click', this.handleClick);\n    document.removeEventListener('keydown', this.handleKeyPress);\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n  }\n\n  // Get difficulty distribution from current tasks\n  getDifficultyDistribution() {\n    const difficultyCount = {\n      common: 0,\n      rare: 0,\n      epic: 0\n    };\n    this.hotPotatoes.forEach(task => {\n      if (difficultyCount.hasOwnProperty(task.difficulty)) {\n        difficultyCount[task.difficulty]++;\n      }\n    });\n    return difficultyCount;\n  }\n\n  // Get task count for specific category and difficulty combination\n  getTaskCountByCategoyAndDifficulty(category, difficulty) {\n    return this.hotPotatoes.filter(task => {\n      const taskCategory = this.mapCategoryToLocation(task.category);\n      return taskCategory === category && task.difficulty === difficulty;\n    }).length;\n  }\n  generateSpirits() {\n    this.spirits = [];\n    const difficultyCount = this.getDifficultyDistribution();\n    const totalTasks = this.hotPotatoes.length;\n\n    // Calculate how many spirits of each type to create\n    const maxSpirits = Math.min(12, Math.max(4, Math.floor(totalTasks / 3)));\n    const totalDifficultyTasks = difficultyCount.common + difficultyCount.rare + difficultyCount.epic;\n    let spiritTypes = [];\n    if (totalDifficultyTasks > 0) {\n      // Create spirits proportional to task difficulties\n      const commonSpirits = Math.floor(difficultyCount.common / totalDifficultyTasks * maxSpirits);\n      const rareSpirits = Math.floor(difficultyCount.rare / totalDifficultyTasks * maxSpirits);\n      const epicSpirits = Math.floor(difficultyCount.epic / totalDifficultyTasks * maxSpirits);\n\n      // Fill the array with difficulty types\n      for (let i = 0; i < commonSpirits; i++) spiritTypes.push('common');\n      for (let i = 0; i < rareSpirits; i++) spiritTypes.push('rare');\n      for (let i = 0; i < epicSpirits; i++) spiritTypes.push('epic');\n\n      // Fill remaining slots randomly if needed\n      const remaining = maxSpirits - spiritTypes.length;\n      const difficulties = ['common', 'rare', 'epic'];\n      for (let i = 0; i < remaining; i++) {\n        spiritTypes.push(difficulties[Math.floor(Math.random() * difficulties.length)]);\n      }\n    } else {\n      // Default distribution if no tasks\n      for (let i = 0; i < maxSpirits; i++) {\n        spiritTypes.push(['common', 'rare', 'epic'][Math.floor(Math.random() * 3)]);\n      }\n    }\n\n    // Create spirits based on the distribution\n    spiritTypes.forEach((difficulty, i) => {\n      this.spirits.push({\n        x: Math.random() * (this.canvas.width - 60) + 30,\n        y: Math.random() * (this.canvas.height - 60) + 30,\n        vx: (Math.random() - 0.5) * 2,\n        vy: (Math.random() - 0.5) * 2,\n        size: this.getSpiritSizeByDifficulty(difficulty),\n        difficulty: difficulty,\n        color: this.getSpiritColorByDifficulty(difficulty),\n        glow: Math.random() * 15 + 10,\n        pulsePhase: Math.random() * Math.PI * 2,\n        id: i,\n        energy: Math.random() * 100 + 50\n      });\n    });\n  }\n  getSpiritSizeByDifficulty(difficulty) {\n    switch (difficulty) {\n      case 'common':\n        return 12 + Math.random() * 6;\n      // 12-18px\n      case 'rare':\n        return 16 + Math.random() * 8;\n      // 16-24px\n      case 'epic':\n        return 20 + Math.random() * 10;\n      // 20-30px\n      default:\n        return 15 + Math.random() * 10;\n    }\n  }\n  getSpiritColorByDifficulty(difficulty) {\n    switch (difficulty) {\n      case 'common':\n        return '#66B2FF';\n      // Blue\n      case 'rare':\n        return '#9B59B6';\n      // Purple\n      case 'epic':\n        return '#FF6B6B';\n      // Red/Orange\n      default:\n        return `hsl(${Math.random() * 360}, 70%, 60%)`;\n    }\n  }\n  getSpiritImageByDifficulty(difficulty) {\n    switch (difficulty) {\n      case 'common':\n        return this.images.spirit1;\n      // spirit1.png\n      case 'rare':\n        return this.images.spirit2;\n      // spirit2.png\n      case 'epic':\n        return this.images.spirit3;\n      // spirit3.png\n      default:\n        return null;\n    }\n  }\n  updateTaskLocations() {\n    // Clear existing task assignments\n    this.locations.forEach(loc => loc.tasks = []);\n\n    // Distribute tasks to locations based on category\n    this.hotPotatoes.forEach(task => {\n      let targetLocation;\n      switch (task.category) {\n        case 'Sales':\n          targetLocation = this.locations.find(l => l.name === \"Sales Office\");\n          break;\n        case 'New Lead':\n          targetLocation = this.locations.find(l => l.name === \"New Lead\");\n          break;\n        case 'New Customer':\n          targetLocation = this.locations.find(l => l.name === \"New Customer\");\n          break;\n        case 'Construction':\n          targetLocation = this.locations.find(l => l.name === \"Construction\");\n          break;\n        case 'Post Construction':\n          targetLocation = this.locations.find(l => l.name === \"Post Construction\");\n          break;\n        case 'Pre-Construction':\n          targetLocation = this.locations.find(l => l.name === \"Pre-Construction\");\n          break;\n        default:\n          targetLocation = this.locations.find(l => l.name === \"Sales Office\");\n      }\n      if (targetLocation) {\n        targetLocation.tasks.push(task);\n      }\n    });\n  }\n  handleClick(event) {\n    const rect = this.canvas.getBoundingClientRect();\n    const x = event.clientX - rect.left;\n    const y = event.clientY - rect.top;\n    for (let spirit of this.spirits) {\n      const distance = Math.sqrt((x - spirit.x) ** 2 + (y - spirit.y) ** 2);\n      if (distance < spirit.size) {\n        this.handleSpiritClick(spirit);\n        return;\n      }\n    }\n    for (let location of this.locations) {\n      const distance = Math.sqrt((x - location.x) ** 2 + (y - location.y) ** 2);\n      if (distance < location.radius && location.tasks.length > 0) {\n        this.handleLocationClick(location);\n        return;\n      }\n    }\n  }\n  handleSpiritClick(spirit) {\n    // For static spirits, show tasks from their assigned location\n    if (spirit.location && spirit.location.tasks.length > 0) {\n      this.handleLocationClick(spirit.location);\n    }\n\n    // Score based on spirit difficulty\n    const scoreMap = {\n      common: 10,\n      rare: 20,\n      epic: 30\n    };\n    const score = scoreMap[spirit.difficulty] || 10;\n    this.updateScore(score);\n    this.createParticles(spirit.x, spirit.y, `+${score}`, spirit.color);\n  }\n  handleLocationClick(location) {\n    if (location.tasks.length === 0) return;\n    const task = location.tasks[0];\n    this.selectedTask = task;\n    this.showTaskModal = true;\n    this.updateScore(25);\n    this.createParticles(location.x, location.y, \"+25\", \"#66B2FF\");\n  }\n  handleKeyPress(event) {\n    if (event.key === 'Escape') {\n      this.showTaskModal = false;\n      this.selectedTask = null;\n    }\n  }\n  createParticles(x, y, text, color) {\n    for (let i = 0; i < 5; i++) {\n      this.particles.push({\n        x: x + (Math.random() - 0.5) * 20,\n        y: y + (Math.random() - 0.5) * 20,\n        vx: (Math.random() - 0.5) * 4,\n        vy: -Math.random() * 3 - 1,\n        life: 60,\n        maxLife: 60,\n        color: color,\n        text: i === 0 ? text : null,\n        size: 4 + Math.random() * 4\n      });\n    }\n  }\n  updateSpirits() {\n    // Spirits are now static, but we still update their pulse animation\n    this.spirits.forEach(spirit => {\n      if (!spirit.isStatic) {\n        // Legacy code for moving spirits (if any)\n        spirit.x += spirit.vx;\n        spirit.y += spirit.vy;\n        if (spirit.x <= spirit.size || spirit.x >= this.canvas.width - spirit.size) {\n          spirit.vx *= -0.8;\n          spirit.x = Math.max(spirit.size, Math.min(this.canvas.width - spirit.size, spirit.x));\n        }\n        if (spirit.y <= spirit.size || spirit.y >= this.canvas.height - spirit.size) {\n          spirit.vy *= -0.8;\n          spirit.y = Math.max(spirit.size, Math.min(this.canvas.height - spirit.size, spirit.y));\n        }\n        for (let location of this.locations) {\n          if (location.tasks.length > 0) {\n            const dx = location.x - spirit.x;\n            const dy = location.y - spirit.y;\n            const distance = Math.sqrt(dx * dx + dy * dy);\n            if (distance > 0 && distance < 150) {\n              const force = 0.02 / distance;\n              spirit.vx += dx / distance * force;\n              spirit.vy += dy / distance * force;\n            }\n          }\n        }\n        spirit.vx *= 0.99;\n        spirit.vy *= 0.99;\n      }\n\n      // Update pulse animation for all spirits\n      spirit.pulsePhase += 0.1;\n      spirit.currentGlow = spirit.glow + Math.sin(spirit.pulsePhase) * 5;\n    });\n  }\n  updateParticles() {\n    this.particles = this.particles.filter(particle => {\n      particle.x += particle.vx;\n      particle.y += particle.vy;\n      particle.vy += 0.1;\n      particle.life--;\n      return particle.life > 0;\n    });\n  }\n  render() {\n    // Draw background\n    if (this.images.background && this.imagesLoaded) {\n      // Scale background to fit canvas\n      this.ctx.drawImage(this.images.background, 0, 0, this.canvas.width, this.canvas.height);\n\n      // Add slight overlay for better visibility\n      this.ctx.fillStyle = 'rgba(0, 20, 40, 0.3)';\n      this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n    } else {\n      // Fallback background\n      this.ctx.fillStyle = 'rgba(0, 20, 40, 0.1)';\n      this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n    }\n\n    // Draw locations\n    this.locations.forEach(location => {\n      const taskCount = location.tasks.length;\n\n      // Draw location circle with semi-transparency to show background\n      this.ctx.beginPath();\n      this.ctx.arc(location.x, location.y, location.radius, 0, Math.PI * 2);\n      this.ctx.fillStyle = taskCount > 0 ? location.color + '80' : 'rgba(68, 68, 68, 0.5)'; // Add transparency\n      this.ctx.fill();\n      this.ctx.strokeStyle = taskCount > 0 ? '#fff' : '#666';\n      this.ctx.lineWidth = 3;\n      this.ctx.stroke();\n\n      // Location number indicator\n      this.ctx.beginPath();\n      this.ctx.arc(location.x - 25, location.y - 25, 12, 0, Math.PI * 2);\n      this.ctx.fillStyle = '#000';\n      this.ctx.fill();\n      this.ctx.strokeStyle = '#fff';\n      this.ctx.lineWidth = 2;\n      this.ctx.stroke();\n      this.ctx.fillStyle = '#fff';\n      this.ctx.font = 'bold 12px Arial';\n      this.ctx.textAlign = 'center';\n      this.ctx.fillText(location.number.toString(), location.x - 25, location.y - 20);\n\n      // Task count indicator (red circle)\n      if (taskCount > 0) {\n        this.ctx.beginPath();\n        this.ctx.arc(location.x + 25, location.y - 25, 15, 0, Math.PI * 2);\n        this.ctx.fillStyle = '#FF6B6B';\n        this.ctx.fill();\n        this.ctx.strokeStyle = '#fff';\n        this.ctx.lineWidth = 2;\n        this.ctx.stroke();\n        this.ctx.fillStyle = '#fff';\n        this.ctx.font = 'bold 14px Arial';\n        this.ctx.textAlign = 'center';\n        this.ctx.fillText(taskCount.toString(), location.x + 25, location.y - 20);\n      }\n\n      // Location name\n      this.ctx.fillStyle = '#fff';\n      this.ctx.font = 'bold 11px Arial';\n      this.ctx.textAlign = 'center';\n      this.ctx.strokeStyle = '#000';\n      this.ctx.lineWidth = 3;\n      this.ctx.strokeText(location.name, location.x, location.y + 50);\n      this.ctx.fillText(location.name, location.x, location.y + 50);\n    });\n\n    // Draw spirits\n    this.spirits.forEach(spirit => {\n      const spiritImage = this.getSpiritImageByDifficulty(spirit.difficulty);\n      if (spiritImage && this.imagesLoaded) {\n        // Draw glow effect behind image\n        const gradient = this.ctx.createRadialGradient(spirit.x, spirit.y, 0, spirit.x, spirit.y, spirit.size + spirit.currentGlow);\n        gradient.addColorStop(0, spirit.color + '80');\n        gradient.addColorStop(1, 'transparent');\n        this.ctx.fillStyle = gradient;\n        this.ctx.beginPath();\n        this.ctx.arc(spirit.x, spirit.y, spirit.size + spirit.currentGlow, 0, Math.PI * 2);\n        this.ctx.fill();\n\n        // Draw sprite image\n        const imageSize = spirit.size * 2;\n        this.ctx.drawImage(spiritImage, spirit.x - imageSize / 2, spirit.y - imageSize / 2, imageSize, imageSize);\n\n        // Draw red circle with task count for this spirit's difficulty and its assigned location\n        if (spirit.location) {\n          const taskCount = this.getTaskCountByCategoyAndDifficulty(spirit.location.name, spirit.difficulty);\n          if (taskCount > 0) {\n            // Red circle background\n            this.ctx.beginPath();\n            this.ctx.arc(spirit.x + spirit.size - 5, spirit.y - spirit.size + 5, 10, 0, Math.PI * 2);\n            this.ctx.fillStyle = '#FF6B6B';\n            this.ctx.fill();\n\n            // White border\n            this.ctx.strokeStyle = '#fff';\n            this.ctx.lineWidth = 2;\n            this.ctx.stroke();\n\n            // Task count text\n            this.ctx.fillStyle = '#fff';\n            this.ctx.font = 'bold 10px Arial';\n            this.ctx.textAlign = 'center';\n            this.ctx.fillText(taskCount.toString(), spirit.x + spirit.size - 5, spirit.y - spirit.size + 9);\n          }\n        }\n      } else {\n        // Fallback: draw colored circle with face\n        const gradient = this.ctx.createRadialGradient(spirit.x, spirit.y, 0, spirit.x, spirit.y, spirit.size + spirit.currentGlow);\n        gradient.addColorStop(0, spirit.color);\n        gradient.addColorStop(1, 'transparent');\n        this.ctx.fillStyle = gradient;\n        this.ctx.beginPath();\n        this.ctx.arc(spirit.x, spirit.y, spirit.size + spirit.currentGlow, 0, Math.PI * 2);\n        this.ctx.fill();\n        this.ctx.fillStyle = spirit.color;\n        this.ctx.beginPath();\n        this.ctx.arc(spirit.x, spirit.y, spirit.size, 0, Math.PI * 2);\n        this.ctx.fill();\n\n        // Draw face\n        this.ctx.fillStyle = '#fff';\n        this.ctx.beginPath();\n        this.ctx.arc(spirit.x - 5, spirit.y - 3, 2, 0, Math.PI * 2);\n        this.ctx.arc(spirit.x + 5, spirit.y - 3, 2, 0, Math.PI * 2);\n        this.ctx.fill();\n        this.ctx.strokeStyle = '#fff';\n        this.ctx.lineWidth = 2;\n        this.ctx.beginPath();\n        this.ctx.arc(spirit.x, spirit.y + 3, 4, 0, Math.PI);\n        this.ctx.stroke();\n\n        // Draw red circle with task count for fallback spirits too\n        if (spirit.location) {\n          const taskCount = this.getTaskCountByCategoyAndDifficulty(spirit.location.name, spirit.difficulty);\n          if (taskCount > 0) {\n            // Red circle background\n            this.ctx.beginPath();\n            this.ctx.arc(spirit.x + spirit.size - 5, spirit.y - spirit.size + 5, 10, 0, Math.PI * 2);\n            this.ctx.fillStyle = '#FF6B6B';\n            this.ctx.fill();\n\n            // White border\n            this.ctx.strokeStyle = '#fff';\n            this.ctx.lineWidth = 2;\n            this.ctx.stroke();\n\n            // Task count text\n            this.ctx.fillStyle = '#fff';\n            this.ctx.font = 'bold 10px Arial';\n            this.ctx.textAlign = 'center';\n            this.ctx.fillText(taskCount.toString(), spirit.x + spirit.size - 5, spirit.y - spirit.size + 9);\n          }\n        }\n      }\n    });\n\n    // Draw particles\n    this.particles.forEach(particle => {\n      const alpha = particle.life / particle.maxLife;\n      this.ctx.fillStyle = particle.color + Math.floor(alpha * 255).toString(16).padStart(2, '0');\n      if (particle.text) {\n        this.ctx.font = 'bold 16px Arial';\n        this.ctx.textAlign = 'center';\n        this.ctx.fillText(particle.text, particle.x, particle.y);\n      } else {\n        this.ctx.beginPath();\n        this.ctx.arc(particle.x, particle.y, particle.size * alpha, 0, Math.PI * 2);\n        this.ctx.fill();\n      }\n    });\n\n    // Draw task modal\n    if (this.showTaskModal && this.selectedTask) {\n      this.drawTaskModal();\n    }\n\n    // Draw instructions\n    this.ctx.fillStyle = 'rgba(0, 0, 0, 0.8)';\n    this.ctx.fillRect(10, this.canvas.height - 50, this.canvas.width - 20, 40);\n    this.ctx.fillStyle = '#fff';\n    this.ctx.font = '14px Arial';\n    this.ctx.textAlign = 'left';\n    this.ctx.fillText('Click spirits or locations to interact â€¢ Spirits show task difficulty â€¢ ESC to close modal', 20, this.canvas.height - 25);\n  }\n  drawTaskModal() {\n    var _task$value, _this$teamStats$task$;\n    const task = this.selectedTask;\n    if (!task) return;\n    const modalWidth = 350;\n    const modalHeight = 250;\n    const modalX = (this.canvas.width - modalWidth) / 2;\n    const modalY = (this.canvas.height - modalHeight) / 2;\n\n    // Modal background with gradient\n    const gradient = this.ctx.createLinearGradient(modalX, modalY, modalX, modalY + modalHeight);\n    gradient.addColorStop(0, 'rgba(0, 44, 84, 0.98)');\n    gradient.addColorStop(1, 'rgba(0, 20, 40, 0.98)');\n    this.ctx.fillStyle = gradient;\n    this.ctx.fillRect(modalX, modalY, modalWidth, modalHeight);\n\n    // Modal border with temperature-based color\n    const temp = task.temperature || 0;\n    let borderColor = '#66B2FF';\n    if (temp > 80) borderColor = '#FF6B6B';else if (temp > 60) borderColor = '#FFCC00';\n    this.ctx.strokeStyle = borderColor;\n    this.ctx.lineWidth = 3;\n    this.ctx.strokeRect(modalX, modalY, modalWidth, modalHeight);\n\n    // Task title\n    this.ctx.fillStyle = '#FFCC00';\n    this.ctx.font = 'bold 18px Arial';\n    this.ctx.textAlign = 'center';\n    this.ctx.fillText(task.title, modalX + modalWidth / 2, modalY + 35);\n\n    // Difficulty and temperature indicators\n    const difficultyEmoji = task.difficulty === 'epic' ? 'ðŸ”¥' : task.difficulty === 'rare' ? 'âš¡' : 'ðŸ’Ž';\n    const tempEmoji = temp > 80 ? 'ðŸ”¥' : temp > 60 ? 'ðŸŒ¶ï¸' : temp > 40 ? 'â™¨ï¸' : 'ðŸ«–';\n    this.ctx.fillStyle = '#fff';\n    this.ctx.font = '20px Arial';\n    this.ctx.fillText(`${difficultyEmoji} ${tempEmoji}`, modalX + modalWidth - 50, modalY + 35);\n\n    // Task details\n    this.ctx.fillStyle = '#fff';\n    this.ctx.font = '14px Arial';\n    this.ctx.textAlign = 'left';\n    const details = [`Category: ${task.category}`, `Difficulty: ${task.difficulty}`, `Value: ${((_task$value = task.value) === null || _task$value === void 0 ? void 0 : _task$value.toLocaleString()) || 0}`, `Holder: ${((_this$teamStats$task$ = this.teamStats[task.holder]) === null || _this$teamStats$task$ === void 0 ? void 0 : _this$teamStats$task$.name) || 'Unknown'}`, `Temperature: ${Math.round(temp)}Â°`, `Time Left: ${task.timeLeft || 0}s`, `Passes: ${task.passCount || 0}`];\n    details.forEach((detail, index) => {\n      this.ctx.fillText(detail, modalX + 20, modalY + 65 + index * 20);\n    });\n\n    // Progress bar for temperature\n    const barWidth = modalWidth - 40;\n    const barHeight = 8;\n    const barX = modalX + 20;\n    const barY = modalY + 210;\n\n    // Background bar\n    this.ctx.fillStyle = '#333';\n    this.ctx.fillRect(barX, barY, barWidth, barHeight);\n\n    // Temperature bar\n    this.ctx.fillStyle = temp > 80 ? '#FF6B6B' : temp > 60 ? '#FFCC00' : '#66B2FF';\n    this.ctx.fillRect(barX, barY, barWidth * temp / 100, barHeight);\n\n    // Action buttons\n    const isMyTask = task.holder === this.currentUser;\n    if (isMyTask) {\n      // Pass button\n      this.ctx.fillStyle = '#FFCC00';\n      this.ctx.fillRect(modalX + 20, modalY + 220, 100, 25);\n      this.ctx.fillStyle = '#000';\n      this.ctx.font = 'bold 12px Arial';\n      this.ctx.textAlign = 'center';\n      this.ctx.fillText('Pass Task', modalX + 70, modalY + 237);\n\n      // Complete button\n      this.ctx.fillStyle = '#2ECC71';\n      this.ctx.fillRect(modalX + 130, modalY + 220, 100, 25);\n      this.ctx.fillStyle = '#fff';\n      this.ctx.fillText('Complete', modalX + 180, modalY + 237);\n\n      // Close button\n      this.ctx.fillStyle = '#FF6B6B';\n      this.ctx.fillRect(modalX + 240, modalY + 220, 80, 25);\n      this.ctx.fillStyle = '#fff';\n      this.ctx.fillText('Close', modalX + 280, modalY + 237);\n    } else {\n      // Just close button for tasks not owned by current user\n      this.ctx.fillStyle = '#FF6B6B';\n      this.ctx.fillRect(modalX + modalWidth / 2 - 40, modalY + 220, 80, 25);\n      this.ctx.fillStyle = '#fff';\n      this.ctx.font = 'bold 12px Arial';\n      this.ctx.textAlign = 'center';\n      this.ctx.fillText('Close', modalX + modalWidth / 2, modalY + 237);\n    }\n\n    // Handle button clicks (add event listener if not already added)\n    if (!this.modalClickHandler) {\n      this.modalClickHandler = event => {\n        if (!this.showTaskModal) return;\n        const rect = this.canvas.getBoundingClientRect();\n        const x = event.clientX - rect.left;\n        const y = event.clientY - rect.top;\n        if (y >= modalY + 220 && y <= modalY + 245) {\n          if (isMyTask) {\n            if (x >= modalX + 20 && x <= modalX + 120) {\n              // Pass button clicked\n              this.onTaskClick(task);\n              this.showTaskModal = false;\n              this.selectedTask = null;\n            } else if (x >= modalX + 130 && x <= modalX + 230) {\n              // Complete button clicked\n              this.onTaskComplete(task);\n              this.showTaskModal = false;\n              this.selectedTask = null;\n              this.updateTaskLocations();\n              this.generateSpirits(); // Regenerate spirits when tasks change\n            } else if (x >= modalX + 240 && x <= modalX + 320) {\n              // Close button clicked\n              this.showTaskModal = false;\n              this.selectedTask = null;\n            }\n          } else {\n            if (x >= modalX + modalWidth / 2 - 40 && x <= modalX + modalWidth / 2 + 40) {\n              // Close button clicked\n              this.showTaskModal = false;\n              this.selectedTask = null;\n            }\n          }\n        }\n      };\n      this.canvas.addEventListener('click', this.modalClickHandler);\n    }\n  }\n  gameLoop() {\n    if (!this.isRunning) return;\n    this.updateSpirits();\n    this.updateParticles();\n    this.updateTaskLocations();\n    this.render();\n    this.animationId = requestAnimationFrame(this.gameLoop);\n  }\n}\nexport default HotPotatoGame;","map":{"version":3,"names":["HotPotatoGame","constructor","canvasId","gameState","updateScore","hotPotatoes","teamStats","currentUser","onTaskClick","onTaskComplete","canvas","document","getElementById","console","error","ctx","getContext","isRunning","animationId","spirits","particles","locations","selectedTask","showTaskModal","images","imagesLoaded","loadImages","initializeLocations","handleClick","bind","handleKeyPress","gameLoop","resizeCanvas","imageUrls","background","spirit1","spirit2","spirit3","loadPromises","Object","entries","map","key","url","Promise","resolve","reject","img","Image","onload","onerror","warn","src","all","log","name","x","y","radius","color","tasks","number","container","parentElement","rect","getBoundingClientRect","width","Math","min","height","start","addEventListener","generateSpirits","updateTaskLocations","stop","cancelAnimationFrame","removeEventListener","clearRect","getDifficultyDistribution","difficultyCount","common","rare","epic","forEach","task","hasOwnProperty","difficulty","getTaskCountByCategoyAndDifficulty","category","filter","taskCategory","mapCategoryToLocation","length","totalTasks","maxSpirits","max","floor","totalDifficultyTasks","spiritTypes","commonSpirits","rareSpirits","epicSpirits","i","push","remaining","difficulties","random","vx","vy","size","getSpiritSizeByDifficulty","getSpiritColorByDifficulty","glow","pulsePhase","PI","id","energy","getSpiritImageByDifficulty","loc","targetLocation","find","l","event","clientX","left","clientY","top","spirit","distance","sqrt","handleSpiritClick","location","handleLocationClick","scoreMap","score","createParticles","text","life","maxLife","updateSpirits","isStatic","dx","dy","force","currentGlow","sin","updateParticles","particle","render","drawImage","fillStyle","fillRect","taskCount","beginPath","arc","fill","strokeStyle","lineWidth","stroke","font","textAlign","fillText","toString","strokeText","spiritImage","gradient","createRadialGradient","addColorStop","imageSize","alpha","padStart","drawTaskModal","_task$value","_this$teamStats$task$","modalWidth","modalHeight","modalX","modalY","createLinearGradient","temp","temperature","borderColor","strokeRect","title","difficultyEmoji","tempEmoji","details","value","toLocaleString","holder","round","timeLeft","passCount","detail","index","barWidth","barHeight","barX","barY","isMyTask","modalClickHandler","requestAnimationFrame"],"sources":["/Users/SUNLAB/hot-potato/frontend/src/game.js"],"sourcesContent":["class HotPotatoGame {\n  constructor(canvasId, gameState, updateScore, hotPotatoes, teamStats, currentUser, onTaskClick, onTaskComplete) {\n    this.canvas = document.getElementById(canvasId);\n    if (!this.canvas) {\n      console.error('Canvas element not found');\n      return;\n    }\n    \n    this.ctx = this.canvas.getContext('2d');\n    this.gameState = gameState;\n    this.updateScore = updateScore;\n    this.hotPotatoes = hotPotatoes;\n    this.teamStats = teamStats;\n    this.currentUser = currentUser;\n    this.onTaskClick = onTaskClick;\n    this.onTaskComplete = onTaskComplete;\n    \n    this.isRunning = false;\n    this.animationId = null;\n    this.spirits = [];\n    this.particles = [];\n    this.locations = [];\n    this.selectedTask = null;\n    this.showTaskModal = false;\n    \n    // Image assets\n    this.images = {};\n    this.imagesLoaded = false;\n    this.loadImages();\n    \n    this.initializeLocations();\n    this.handleClick = this.handleClick.bind(this);\n    this.handleKeyPress = this.handleKeyPress.bind(this);\n    this.gameLoop = this.gameLoop.bind(this);\n    this.resizeCanvas();\n  }\n  \n  async loadImages() {\n    const imageUrls = {\n      background: 'myimages/background.png',\n      spirit1: 'myimages/spirit1.png', // common\n      spirit2: 'myimages/spirit2.png', // rare\n      spirit3: 'myimages/spirit3.png'  // epic\n    };\n    \n    const loadPromises = Object.entries(imageUrls).map(([key, url]) => {\n      return new Promise((resolve, reject) => {\n        const img = new Image();\n        img.onload = () => {\n          this.images[key] = img;\n          resolve();\n        };\n        img.onerror = () => {\n          console.warn(`Failed to load image: ${url}`);\n          // Create fallback for missing images\n          this.images[key] = null;\n          resolve();\n        };\n        img.src = url;\n      });\n    });\n    \n    try {\n      await Promise.all(loadPromises);\n      this.imagesLoaded = true;\n      console.log('Images loaded successfully');\n    } catch (error) {\n      console.error('Error loading images:', error);\n      this.imagesLoaded = true; // Continue without images\n    }\n  }\n  \n  initializeLocations() {\n    // Positioning based on the background image layout\n    this.locations = [\n      { name: \"Sales Office\", x: 150, y: 320, radius: 40, color: \"#FFCC00\", tasks: [], number: 1 }, // Bottom left house\n      { name: \"New Lead\", x: 250, y: 250, radius: 40, color: \"#66B2FF\", tasks: [], number: 2 }, // Empty lot\n      { name: \"New Customer\", x: 350, y: 200, radius: 40, color: \"#9B59B6\", tasks: [], number: 3 }, // Small house\n      { name: \"Pre-Construction\", x: 550, y: 120, radius: 40, color: \"#2ECC71\", tasks: [], number: 4 }, // Big building with truck\n      { name: \"Construction\", x: 600, y: 280, radius: 40, color: \"#FF6B6B\", tasks: [], number: 5 }, // Construction site with ladder\n      { name: \"Post Construction\", x: 700, y: 320, radius: 40, color: \"#4A90E2\", tasks: [], number: 6 } // Happy family house\n    ];\n  }\n  \n  resizeCanvas() {\n    const container = this.canvas.parentElement;\n    const rect = container.getBoundingClientRect();\n    this.canvas.width = Math.min(800, rect.width - 20);\n    this.canvas.height = 400;\n  }\n  \n  start() {\n    if (this.isRunning) return;\n    this.isRunning = true;\n    this.canvas.addEventListener('click', this.handleClick);\n    document.addEventListener('keydown', this.handleKeyPress);\n    this.generateSpirits();\n    this.updateTaskLocations();\n    this.gameLoop();\n  }\n  \n  stop() {\n    this.isRunning = false;\n    if (this.animationId) {\n      cancelAnimationFrame(this.animationId);\n      this.animationId = null;\n    }\n    this.canvas.removeEventListener('click', this.handleClick);\n    document.removeEventListener('keydown', this.handleKeyPress);\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n  }\n  \n  // Get difficulty distribution from current tasks\n  getDifficultyDistribution() {\n    const difficultyCount = { common: 0, rare: 0, epic: 0 };\n    \n    this.hotPotatoes.forEach(task => {\n      if (difficultyCount.hasOwnProperty(task.difficulty)) {\n        difficultyCount[task.difficulty]++;\n      }\n    });\n    \n    return difficultyCount;\n  }\n\n  // Get task count for specific category and difficulty combination\n  getTaskCountByCategoyAndDifficulty(category, difficulty) {\n    return this.hotPotatoes.filter(task => {\n      const taskCategory = this.mapCategoryToLocation(task.category);\n      return taskCategory === category && task.difficulty === difficulty;\n    }).length;\n  }\n  \n  generateSpirits() {\n    this.spirits = [];\n    const difficultyCount = this.getDifficultyDistribution();\n    const totalTasks = this.hotPotatoes.length;\n    \n    // Calculate how many spirits of each type to create\n    const maxSpirits = Math.min(12, Math.max(4, Math.floor(totalTasks / 3)));\n    const totalDifficultyTasks = difficultyCount.common + difficultyCount.rare + difficultyCount.epic;\n    \n    let spiritTypes = [];\n    \n    if (totalDifficultyTasks > 0) {\n      // Create spirits proportional to task difficulties\n      const commonSpirits = Math.floor((difficultyCount.common / totalDifficultyTasks) * maxSpirits);\n      const rareSpirits = Math.floor((difficultyCount.rare / totalDifficultyTasks) * maxSpirits);\n      const epicSpirits = Math.floor((difficultyCount.epic / totalDifficultyTasks) * maxSpirits);\n      \n      // Fill the array with difficulty types\n      for (let i = 0; i < commonSpirits; i++) spiritTypes.push('common');\n      for (let i = 0; i < rareSpirits; i++) spiritTypes.push('rare');\n      for (let i = 0; i < epicSpirits; i++) spiritTypes.push('epic');\n      \n      // Fill remaining slots randomly if needed\n      const remaining = maxSpirits - spiritTypes.length;\n      const difficulties = ['common', 'rare', 'epic'];\n      for (let i = 0; i < remaining; i++) {\n        spiritTypes.push(difficulties[Math.floor(Math.random() * difficulties.length)]);\n      }\n    } else {\n      // Default distribution if no tasks\n      for (let i = 0; i < maxSpirits; i++) {\n        spiritTypes.push(['common', 'rare', 'epic'][Math.floor(Math.random() * 3)]);\n      }\n    }\n    \n    // Create spirits based on the distribution\n    spiritTypes.forEach((difficulty, i) => {\n      this.spirits.push({\n        x: Math.random() * (this.canvas.width - 60) + 30,\n        y: Math.random() * (this.canvas.height - 60) + 30,\n        vx: (Math.random() - 0.5) * 2,\n        vy: (Math.random() - 0.5) * 2,\n        size: this.getSpiritSizeByDifficulty(difficulty),\n        difficulty: difficulty,\n        color: this.getSpiritColorByDifficulty(difficulty),\n        glow: Math.random() * 15 + 10,\n        pulsePhase: Math.random() * Math.PI * 2,\n        id: i,\n        energy: Math.random() * 100 + 50\n      });\n    });\n  }\n  \n  getSpiritSizeByDifficulty(difficulty) {\n    switch(difficulty) {\n      case 'common': return 12 + Math.random() * 6;  // 12-18px\n      case 'rare': return 16 + Math.random() * 8;    // 16-24px\n      case 'epic': return 20 + Math.random() * 10;   // 20-30px\n      default: return 15 + Math.random() * 10;\n    }\n  }\n  \n  getSpiritColorByDifficulty(difficulty) {\n    switch(difficulty) {\n      case 'common': return '#66B2FF';  // Blue\n      case 'rare': return '#9B59B6';    // Purple\n      case 'epic': return '#FF6B6B';    // Red/Orange\n      default: return `hsl(${Math.random() * 360}, 70%, 60%)`;\n    }\n  }\n  \n  getSpiritImageByDifficulty(difficulty) {\n    switch(difficulty) {\n      case 'common': return this.images.spirit1;  // spirit1.png\n      case 'rare': return this.images.spirit2;    // spirit2.png\n      case 'epic': return this.images.spirit3;    // spirit3.png\n      default: return null;\n    }\n  }\n  \n  updateTaskLocations() {\n    // Clear existing task assignments\n    this.locations.forEach(loc => loc.tasks = []);\n    \n    // Distribute tasks to locations based on category\n    this.hotPotatoes.forEach(task => {\n      let targetLocation;\n      \n      switch(task.category) {\n        case 'Sales':\n          targetLocation = this.locations.find(l => l.name === \"Sales Office\");\n          break;\n        case 'New Lead':\n          targetLocation = this.locations.find(l => l.name === \"New Lead\");\n          break;\n        case 'New Customer':\n          targetLocation = this.locations.find(l => l.name === \"New Customer\");\n          break;\n        case 'Construction':\n          targetLocation = this.locations.find(l => l.name === \"Construction\");\n          break;\n        case 'Post Construction':\n          targetLocation = this.locations.find(l => l.name === \"Post Construction\");\n          break;\n        case 'Pre-Construction':\n          targetLocation = this.locations.find(l => l.name === \"Pre-Construction\");\n          break;\n        default:\n          targetLocation = this.locations.find(l => l.name === \"Sales Office\");\n      }\n      \n      if (targetLocation) {\n        targetLocation.tasks.push(task);\n      }\n    });\n  }\n  \n  handleClick(event) {\n    const rect = this.canvas.getBoundingClientRect();\n    const x = event.clientX - rect.left;\n    const y = event.clientY - rect.top;\n    \n    for (let spirit of this.spirits) {\n      const distance = Math.sqrt((x - spirit.x) ** 2 + (y - spirit.y) ** 2);\n      if (distance < spirit.size) {\n        this.handleSpiritClick(spirit);\n        return;\n      }\n    }\n    \n    for (let location of this.locations) {\n      const distance = Math.sqrt((x - location.x) ** 2 + (y - location.y) ** 2);\n      if (distance < location.radius && location.tasks.length > 0) {\n        this.handleLocationClick(location);\n        return;\n      }\n    }\n  }\n  \n  handleSpiritClick(spirit) {\n    // For static spirits, show tasks from their assigned location\n    if (spirit.location && spirit.location.tasks.length > 0) {\n      this.handleLocationClick(spirit.location);\n    }\n    \n    // Score based on spirit difficulty\n    const scoreMap = { common: 10, rare: 20, epic: 30 };\n    const score = scoreMap[spirit.difficulty] || 10;\n    \n    this.updateScore(score);\n    this.createParticles(spirit.x, spirit.y, `+${score}`, spirit.color);\n  }\n  \n  handleLocationClick(location) {\n    if (location.tasks.length === 0) return;\n    \n    const task = location.tasks[0];\n    this.selectedTask = task;\n    this.showTaskModal = true;\n    \n    this.updateScore(25);\n    this.createParticles(location.x, location.y, \"+25\", \"#66B2FF\");\n  }\n  \n  handleKeyPress(event) {\n    if (event.key === 'Escape') {\n      this.showTaskModal = false;\n      this.selectedTask = null;\n    }\n  }\n  \n  createParticles(x, y, text, color) {\n    for (let i = 0; i < 5; i++) {\n      this.particles.push({\n        x: x + (Math.random() - 0.5) * 20,\n        y: y + (Math.random() - 0.5) * 20,\n        vx: (Math.random() - 0.5) * 4,\n        vy: -Math.random() * 3 - 1,\n        life: 60,\n        maxLife: 60,\n        color: color,\n        text: i === 0 ? text : null,\n        size: 4 + Math.random() * 4\n      });\n    }\n  }\n  \n  updateSpirits() {\n    // Spirits are now static, but we still update their pulse animation\n    this.spirits.forEach(spirit => {\n      if (!spirit.isStatic) {\n        // Legacy code for moving spirits (if any)\n        spirit.x += spirit.vx;\n        spirit.y += spirit.vy;\n        \n        if (spirit.x <= spirit.size || spirit.x >= this.canvas.width - spirit.size) {\n          spirit.vx *= -0.8;\n          spirit.x = Math.max(spirit.size, Math.min(this.canvas.width - spirit.size, spirit.x));\n        }\n        if (spirit.y <= spirit.size || spirit.y >= this.canvas.height - spirit.size) {\n          spirit.vy *= -0.8;\n          spirit.y = Math.max(spirit.size, Math.min(this.canvas.height - spirit.size, spirit.y));\n        }\n        \n        for (let location of this.locations) {\n          if (location.tasks.length > 0) {\n            const dx = location.x - spirit.x;\n            const dy = location.y - spirit.y;\n            const distance = Math.sqrt(dx * dx + dy * dy);\n            \n            if (distance > 0 && distance < 150) {\n              const force = 0.02 / distance;\n              spirit.vx += (dx / distance) * force;\n              spirit.vy += (dy / distance) * force;\n            }\n          }\n        }\n        \n        spirit.vx *= 0.99;\n        spirit.vy *= 0.99;\n      }\n      \n      // Update pulse animation for all spirits\n      spirit.pulsePhase += 0.1;\n      spirit.currentGlow = spirit.glow + Math.sin(spirit.pulsePhase) * 5;\n    });\n  }\n  \n  updateParticles() {\n    this.particles = this.particles.filter(particle => {\n      particle.x += particle.vx;\n      particle.y += particle.vy;\n      particle.vy += 0.1;\n      particle.life--;\n      return particle.life > 0;\n    });\n  }\n  \n  render() {\n    // Draw background\n    if (this.images.background && this.imagesLoaded) {\n      // Scale background to fit canvas\n      this.ctx.drawImage(this.images.background, 0, 0, this.canvas.width, this.canvas.height);\n      \n      // Add slight overlay for better visibility\n      this.ctx.fillStyle = 'rgba(0, 20, 40, 0.3)';\n      this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n    } else {\n      // Fallback background\n      this.ctx.fillStyle = 'rgba(0, 20, 40, 0.1)';\n      this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n    }\n    \n    // Draw locations\n    this.locations.forEach(location => {\n      const taskCount = location.tasks.length;\n      \n      // Draw location circle with semi-transparency to show background\n      this.ctx.beginPath();\n      this.ctx.arc(location.x, location.y, location.radius, 0, Math.PI * 2);\n      this.ctx.fillStyle = taskCount > 0 ? location.color + '80' : 'rgba(68, 68, 68, 0.5)'; // Add transparency\n      this.ctx.fill();\n      \n      this.ctx.strokeStyle = taskCount > 0 ? '#fff' : '#666';\n      this.ctx.lineWidth = 3;\n      this.ctx.stroke();\n      \n      // Location number indicator\n      this.ctx.beginPath();\n      this.ctx.arc(location.x - 25, location.y - 25, 12, 0, Math.PI * 2);\n      this.ctx.fillStyle = '#000';\n      this.ctx.fill();\n      this.ctx.strokeStyle = '#fff';\n      this.ctx.lineWidth = 2;\n      this.ctx.stroke();\n      \n      this.ctx.fillStyle = '#fff';\n      this.ctx.font = 'bold 12px Arial';\n      this.ctx.textAlign = 'center';\n      this.ctx.fillText(location.number.toString(), location.x - 25, location.y - 20);\n      \n      // Task count indicator (red circle)\n      if (taskCount > 0) {\n        this.ctx.beginPath();\n        this.ctx.arc(location.x + 25, location.y - 25, 15, 0, Math.PI * 2);\n        this.ctx.fillStyle = '#FF6B6B';\n        this.ctx.fill();\n        this.ctx.strokeStyle = '#fff';\n        this.ctx.lineWidth = 2;\n        this.ctx.stroke();\n        \n        this.ctx.fillStyle = '#fff';\n        this.ctx.font = 'bold 14px Arial';\n        this.ctx.textAlign = 'center';\n        this.ctx.fillText(taskCount.toString(), location.x + 25, location.y - 20);\n      }\n      \n      // Location name\n      this.ctx.fillStyle = '#fff';\n      this.ctx.font = 'bold 11px Arial';\n      this.ctx.textAlign = 'center';\n      this.ctx.strokeStyle = '#000';\n      this.ctx.lineWidth = 3;\n      this.ctx.strokeText(location.name, location.x, location.y + 50);\n      this.ctx.fillText(location.name, location.x, location.y + 50);\n    });\n    \n    // Draw spirits\n    this.spirits.forEach(spirit => {\n      const spiritImage = this.getSpiritImageByDifficulty(spirit.difficulty);\n      \n      if (spiritImage && this.imagesLoaded) {\n        // Draw glow effect behind image\n        const gradient = this.ctx.createRadialGradient(\n          spirit.x, spirit.y, 0,\n          spirit.x, spirit.y, spirit.size + spirit.currentGlow\n        );\n        gradient.addColorStop(0, spirit.color + '80');\n        gradient.addColorStop(1, 'transparent');\n        \n        this.ctx.fillStyle = gradient;\n        this.ctx.beginPath();\n        this.ctx.arc(spirit.x, spirit.y, spirit.size + spirit.currentGlow, 0, Math.PI * 2);\n        this.ctx.fill();\n        \n        // Draw sprite image\n        const imageSize = spirit.size * 2;\n        this.ctx.drawImage(\n          spiritImage,\n          spirit.x - imageSize/2,\n          spirit.y - imageSize/2,\n          imageSize,\n          imageSize\n        );\n\n        // Draw red circle with task count for this spirit's difficulty and its assigned location\n        if (spirit.location) {\n          const taskCount = this.getTaskCountByCategoyAndDifficulty(spirit.location.name, spirit.difficulty);\n          \n          if (taskCount > 0) {\n            // Red circle background\n            this.ctx.beginPath();\n            this.ctx.arc(spirit.x + spirit.size - 5, spirit.y - spirit.size + 5, 10, 0, Math.PI * 2);\n            this.ctx.fillStyle = '#FF6B6B';\n            this.ctx.fill();\n            \n            // White border\n            this.ctx.strokeStyle = '#fff';\n            this.ctx.lineWidth = 2;\n            this.ctx.stroke();\n            \n            // Task count text\n            this.ctx.fillStyle = '#fff';\n            this.ctx.font = 'bold 10px Arial';\n            this.ctx.textAlign = 'center';\n            this.ctx.fillText(taskCount.toString(), spirit.x + spirit.size - 5, spirit.y - spirit.size + 9);\n          }\n        }\n      } else {\n        // Fallback: draw colored circle with face\n        const gradient = this.ctx.createRadialGradient(\n          spirit.x, spirit.y, 0,\n          spirit.x, spirit.y, spirit.size + spirit.currentGlow\n        );\n        gradient.addColorStop(0, spirit.color);\n        gradient.addColorStop(1, 'transparent');\n        \n        this.ctx.fillStyle = gradient;\n        this.ctx.beginPath();\n        this.ctx.arc(spirit.x, spirit.y, spirit.size + spirit.currentGlow, 0, Math.PI * 2);\n        this.ctx.fill();\n        \n        this.ctx.fillStyle = spirit.color;\n        this.ctx.beginPath();\n        this.ctx.arc(spirit.x, spirit.y, spirit.size, 0, Math.PI * 2);\n        this.ctx.fill();\n        \n        // Draw face\n        this.ctx.fillStyle = '#fff';\n        this.ctx.beginPath();\n        this.ctx.arc(spirit.x - 5, spirit.y - 3, 2, 0, Math.PI * 2);\n        this.ctx.arc(spirit.x + 5, spirit.y - 3, 2, 0, Math.PI * 2);\n        this.ctx.fill();\n        \n        this.ctx.strokeStyle = '#fff';\n        this.ctx.lineWidth = 2;\n        this.ctx.beginPath();\n        this.ctx.arc(spirit.x, spirit.y + 3, 4, 0, Math.PI);\n        this.ctx.stroke();\n\n        // Draw red circle with task count for fallback spirits too\n        if (spirit.location) {\n          const taskCount = this.getTaskCountByCategoyAndDifficulty(spirit.location.name, spirit.difficulty);\n          \n          if (taskCount > 0) {\n            // Red circle background\n            this.ctx.beginPath();\n            this.ctx.arc(spirit.x + spirit.size - 5, spirit.y - spirit.size + 5, 10, 0, Math.PI * 2);\n            this.ctx.fillStyle = '#FF6B6B';\n            this.ctx.fill();\n            \n            // White border\n            this.ctx.strokeStyle = '#fff';\n            this.ctx.lineWidth = 2;\n            this.ctx.stroke();\n            \n            // Task count text\n            this.ctx.fillStyle = '#fff';\n            this.ctx.font = 'bold 10px Arial';\n            this.ctx.textAlign = 'center';\n            this.ctx.fillText(taskCount.toString(), spirit.x + spirit.size - 5, spirit.y - spirit.size + 9);\n          }\n        }\n      }\n    });\n    \n    // Draw particles\n    this.particles.forEach(particle => {\n      const alpha = particle.life / particle.maxLife;\n      this.ctx.fillStyle = particle.color + Math.floor(alpha * 255).toString(16).padStart(2, '0');\n      \n      if (particle.text) {\n        this.ctx.font = 'bold 16px Arial';\n        this.ctx.textAlign = 'center';\n        this.ctx.fillText(particle.text, particle.x, particle.y);\n      } else {\n        this.ctx.beginPath();\n        this.ctx.arc(particle.x, particle.y, particle.size * alpha, 0, Math.PI * 2);\n        this.ctx.fill();\n      }\n    });\n    \n    // Draw task modal\n    if (this.showTaskModal && this.selectedTask) {\n      this.drawTaskModal();\n    }\n    \n    // Draw instructions\n    this.ctx.fillStyle = 'rgba(0, 0, 0, 0.8)';\n    this.ctx.fillRect(10, this.canvas.height - 50, this.canvas.width - 20, 40);\n    \n    this.ctx.fillStyle = '#fff';\n    this.ctx.font = '14px Arial';\n    this.ctx.textAlign = 'left';\n    this.ctx.fillText('Click spirits or locations to interact â€¢ Spirits show task difficulty â€¢ ESC to close modal', 20, this.canvas.height - 25);\n  }\n  \n  drawTaskModal() {\n    const task = this.selectedTask;\n    if (!task) return;\n    \n    const modalWidth = 350;\n    const modalHeight = 250;\n    const modalX = (this.canvas.width - modalWidth) / 2;\n    const modalY = (this.canvas.height - modalHeight) / 2;\n    \n    // Modal background with gradient\n    const gradient = this.ctx.createLinearGradient(modalX, modalY, modalX, modalY + modalHeight);\n    gradient.addColorStop(0, 'rgba(0, 44, 84, 0.98)');\n    gradient.addColorStop(1, 'rgba(0, 20, 40, 0.98)');\n    this.ctx.fillStyle = gradient;\n    this.ctx.fillRect(modalX, modalY, modalWidth, modalHeight);\n    \n    // Modal border with temperature-based color\n    const temp = task.temperature || 0;\n    let borderColor = '#66B2FF';\n    if (temp > 80) borderColor = '#FF6B6B';\n    else if (temp > 60) borderColor = '#FFCC00';\n    \n    this.ctx.strokeStyle = borderColor;\n    this.ctx.lineWidth = 3;\n    this.ctx.strokeRect(modalX, modalY, modalWidth, modalHeight);\n    \n    // Task title\n    this.ctx.fillStyle = '#FFCC00';\n    this.ctx.font = 'bold 18px Arial';\n    this.ctx.textAlign = 'center';\n    this.ctx.fillText(task.title, modalX + modalWidth / 2, modalY + 35);\n    \n    // Difficulty and temperature indicators\n    const difficultyEmoji = task.difficulty === 'epic' ? 'ðŸ”¥' : task.difficulty === 'rare' ? 'âš¡' : 'ðŸ’Ž';\n    const tempEmoji = temp > 80 ? 'ðŸ”¥' : temp > 60 ? 'ðŸŒ¶ï¸' : temp > 40 ? 'â™¨ï¸' : 'ðŸ«–';\n    \n    this.ctx.fillStyle = '#fff';\n    this.ctx.font = '20px Arial';\n    this.ctx.fillText(`${difficultyEmoji} ${tempEmoji}`, modalX + modalWidth - 50, modalY + 35);\n    \n    // Task details\n    this.ctx.fillStyle = '#fff';\n    this.ctx.font = '14px Arial';\n    this.ctx.textAlign = 'left';\n    \n    const details = [\n      `Category: ${task.category}`,\n      `Difficulty: ${task.difficulty}`,\n      `Value: ${task.value?.toLocaleString() || 0}`,\n      `Holder: ${this.teamStats[task.holder]?.name || 'Unknown'}`,\n      `Temperature: ${Math.round(temp)}Â°`,\n      `Time Left: ${task.timeLeft || 0}s`,\n      `Passes: ${task.passCount || 0}`\n    ];\n    \n    details.forEach((detail, index) => {\n      this.ctx.fillText(detail, modalX + 20, modalY + 65 + index * 20);\n    });\n    \n    // Progress bar for temperature\n    const barWidth = modalWidth - 40;\n    const barHeight = 8;\n    const barX = modalX + 20;\n    const barY = modalY + 210;\n    \n    // Background bar\n    this.ctx.fillStyle = '#333';\n    this.ctx.fillRect(barX, barY, barWidth, barHeight);\n    \n    // Temperature bar\n    this.ctx.fillStyle = temp > 80 ? '#FF6B6B' : temp > 60 ? '#FFCC00' : '#66B2FF';\n    this.ctx.fillRect(barX, barY, (barWidth * temp) / 100, barHeight);\n    \n    // Action buttons\n    const isMyTask = task.holder === this.currentUser;\n    \n    if (isMyTask) {\n      // Pass button\n      this.ctx.fillStyle = '#FFCC00';\n      this.ctx.fillRect(modalX + 20, modalY + 220, 100, 25);\n      this.ctx.fillStyle = '#000';\n      this.ctx.font = 'bold 12px Arial';\n      this.ctx.textAlign = 'center';\n      this.ctx.fillText('Pass Task', modalX + 70, modalY + 237);\n      \n      // Complete button\n      this.ctx.fillStyle = '#2ECC71';\n      this.ctx.fillRect(modalX + 130, modalY + 220, 100, 25);\n      this.ctx.fillStyle = '#fff';\n      this.ctx.fillText('Complete', modalX + 180, modalY + 237);\n      \n      // Close button\n      this.ctx.fillStyle = '#FF6B6B';\n      this.ctx.fillRect(modalX + 240, modalY + 220, 80, 25);\n      this.ctx.fillStyle = '#fff';\n      this.ctx.fillText('Close', modalX + 280, modalY + 237);\n    } else {\n      // Just close button for tasks not owned by current user\n      this.ctx.fillStyle = '#FF6B6B';\n      this.ctx.fillRect(modalX + modalWidth/2 - 40, modalY + 220, 80, 25);\n      this.ctx.fillStyle = '#fff';\n      this.ctx.font = 'bold 12px Arial';\n      this.ctx.textAlign = 'center';\n      this.ctx.fillText('Close', modalX + modalWidth/2, modalY + 237);\n    }\n    \n    // Handle button clicks (add event listener if not already added)\n    if (!this.modalClickHandler) {\n      this.modalClickHandler = (event) => {\n        if (!this.showTaskModal) return;\n        \n        const rect = this.canvas.getBoundingClientRect();\n        const x = event.clientX - rect.left;\n        const y = event.clientY - rect.top;\n        \n        if (y >= modalY + 220 && y <= modalY + 245) {\n          if (isMyTask) {\n            if (x >= modalX + 20 && x <= modalX + 120) {\n              // Pass button clicked\n              this.onTaskClick(task);\n              this.showTaskModal = false;\n              this.selectedTask = null;\n            } else if (x >= modalX + 130 && x <= modalX + 230) {\n              // Complete button clicked\n              this.onTaskComplete(task);\n              this.showTaskModal = false;\n              this.selectedTask = null;\n              this.updateTaskLocations();\n              this.generateSpirits(); // Regenerate spirits when tasks change\n            } else if (x >= modalX + 240 && x <= modalX + 320) {\n              // Close button clicked\n              this.showTaskModal = false;\n              this.selectedTask = null;\n            }\n          } else {\n            if (x >= modalX + modalWidth/2 - 40 && x <= modalX + modalWidth/2 + 40) {\n              // Close button clicked\n              this.showTaskModal = false;\n              this.selectedTask = null;\n            }\n          }\n        }\n      };\n      this.canvas.addEventListener('click', this.modalClickHandler);\n    }\n  }\n  \n  gameLoop() {\n    if (!this.isRunning) return;\n    \n    this.updateSpirits();\n    this.updateParticles();\n    this.updateTaskLocations();\n    this.render();\n    \n    this.animationId = requestAnimationFrame(this.gameLoop);\n  }\n}\n\nexport default HotPotatoGame;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}